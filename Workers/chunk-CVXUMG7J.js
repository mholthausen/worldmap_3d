/*! For license information please see chunk-CVXUMG7J.js.LICENSE.txt */
import{a as O}from"./chunk-YIFABOF6.js";import{c as I,e as V}from"./chunk-KDW4RGIR.js";import{a as W,b as v}from"./chunk-V624RX7A.js";import{a as R}from"./chunk-VZ2RFJ3P.js";import{a as k}from"./chunk-BIYNNQRQ.js";import{e as N}from"./chunk-ZLUSVROX.js";var z=Math.cos,Z=Math.sin,D=Math.sqrt,L={computePosition:function(t,n,a,r,o,s,e){let i=n.radiiSquared,g=t.nwCorner,h=t.boundingRectangle,l=g.latitude-t.granYCos*r+o*t.granXSin,u=z(l),c=Z(l),R=i.z*c,S=g.longitude+r*t.granYSin+o*t.granXCos,C=u*z(S),w=u*Z(S),m=i.x*C,O=i.y*w,d=D(m*C+O*w+R*c);if(s.x=m/d,s.y=O/d,s.z=R/d,a){let n=t.stNwCorner;N(n)?(l=n.latitude-t.stGranYCos*r+o*t.stGranXSin,S=n.longitude+r*t.stGranYSin+o*t.stGranXCos,e.x=(S-t.stWest)*t.lonScalar,e.y=(l-t.stSouth)*t.latScalar):(e.x=(S-h.west)*t.lonScalar,e.y=(l-h.south)*t.latScalar)}}},A=new V,g=new W,F=new v,b=new W,q=new O;function B(t,n,a,r,o,s,e){let i=Math.cos(n),h=r*i,l=a*i,u=Math.sin(n),c=r*u,R=a*u;g=q.project(t,g),g=W.subtract(g,b,g);let S=V.fromRotation(n,A);g=V.multiplyByVector(S,g,g),g=W.add(g,b,g),s-=1,e-=1;let C=(t=q.unproject(g,t)).latitude,w=C+s*R,m=C-h*e,O=C-h*e+s*R,d=Math.max(C,w,m,O),X=Math.min(C,w,m,O),Y=t.longitude,p=Y+s*l,I=Y+e*c,f=Y+e*c+s*l;return{north:d,south:X,east:Math.max(Y,p,I,f),west:Math.min(Y,p,I,f),granYCos:h,granYSin:c,granXCos:l,granXSin:R,nwCorner:t}}L.computeOptions=function(t,n,a,r,o,s,e){let i=t.east,g=t.west,h=t.north,l=t.south,u=!1,c=!1;h===R.PI_OVER_TWO&&(u=!0),l===-R.PI_OVER_TWO&&(c=!0);let S,C=h-l;S=g>i?R.TWO_PI-g+i:i-g;let w=Math.ceil(S/n)+1,m=Math.ceil(C/n)+1,O=S/(w-1),d=C/(m-1),X=I.northwest(t,s),Y=I.center(t,F);(0!==a||0!==r)&&(Y.longitude<X.longitude&&(Y.longitude+=R.TWO_PI),b=q.project(Y,b));let p=d,W=O,f=I.clone(t,o),V={granYCos:p,granYSin:0,granXCos:W,granXSin:0,nwCorner:X,boundingRectangle:f,width:w,height:m,northCap:u,southCap:c};if(0!==a){let t=B(X,a,O,d,Y,w,m);if(h=t.north,l=t.south,i=t.east,g=t.west,h<-R.PI_OVER_TWO||h>R.PI_OVER_TWO||l<-R.PI_OVER_TWO||l>R.PI_OVER_TWO)throw new k("Rotated rectangle is invalid.  It crosses over either the north or south pole.");V.granYCos=t.granYCos,V.granYSin=t.granYSin,V.granXCos=t.granXCos,V.granXSin=t.granXSin,f.north=h,f.south=l,f.east=i,f.west=g}if(0!==r){a-=r;let t=I.northwest(f,e),n=B(t,a,O,d,Y,w,m);V.stGranYCos=n.granYCos,V.stGranXCos=n.granXCos,V.stGranYSin=n.granYSin,V.stGranXSin=n.granXSin,V.stNwCorner=t,V.stWest=n.west,V.stSouth=n.south}return V};var nt=L;export{nt as a};