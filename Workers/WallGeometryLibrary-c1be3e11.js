define(["exports","./arrayRemoveDuplicates-3a9a9480","./Cartesian2-b4b7b0b3","./when-208fe5b0","./Math-8386669c","./PolylinePipeline-b25bdf3a"],(function(e,i,t,a,r,n){"use strict";var o={},l=new t.Cartographic,s=new t.Cartographic,h=new Array(2),g=new Array(2),p={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};o.computePositions=function(e,o,u,c,d,y){var m=function(e,n,o,h){var g=(n=i.arrayRemoveDuplicates(n,t.Cartesian3.equalsEpsilon)).length;if(!(g<2)){var p=a.defined(h),u=a.defined(o),c=new Array(g),d=new Array(g),y=new Array(g),m=n[0];c[0]=m;var v=e.cartesianToCartographic(m,l);u&&(v.height=o[0]),d[0]=v.height,y[0]=p?h[0]:0;for(var P,f,A=d[0]===y[0],C=1,b=1;b<g;++b){var w=n[b],M=e.cartesianToCartographic(w,s);u&&(M.height=o[b]),A=A&&0===M.height,P=v,f=M,r.CesiumMath.equalsEpsilon(P.latitude,f.latitude,r.CesiumMath.EPSILON10)&&r.CesiumMath.equalsEpsilon(P.longitude,f.longitude,r.CesiumMath.EPSILON10)?v.height<M.height&&(d[C-1]=M.height):(c[C]=w,d[C]=M.height,y[C]=p?h[b]:0,A=A&&d[C]===y[C],t.Cartographic.clone(M,v),++C)}if(!(A||C<2))return c.length=C,d.length=C,y.length=C,{positions:c,topHeights:d,bottomHeights:y}}}(e,o,u,c);if(a.defined(m)){o=m.positions,u=m.topHeights,c=m.bottomHeights;var v=o.length,P=(m=v-2,r.CesiumMath.chordLength(d,e.maximumRadius)),f=p;if(f.minDistance=P,f.ellipsoid=e,y){for(var A=0,C=0;C<v-1;C++)A+=n.PolylinePipeline.numberOfPoints(o[C],o[C+1],P)+1;var b=new Float64Array(3*A),w=new Float64Array(3*A),M=h,E=g;f.positions=M,f.height=E;var F=0;for(C=0;C<v-1;C++){M[0]=o[C],M[1]=o[C+1],E[0]=u[C],E[1]=u[C+1];var H=n.PolylinePipeline.generateArc(f);b.set(H,F),E[0]=c[C],E[1]=c[C+1],w.set(n.PolylinePipeline.generateArc(f),F),F+=H.length}}else f.positions=o,f.height=u,b=new Float64Array(n.PolylinePipeline.generateArc(f)),f.height=c,w=new Float64Array(n.PolylinePipeline.generateArc(f));return{bottomPositions:w,topPositions:b,numCorners:m}}},e.WallGeometryLibrary=o}));