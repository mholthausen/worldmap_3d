define(["./when-208fe5b0","./Cartesian2-b4b7b0b3","./Transforms-d5dbea8d","./ComponentDatatype-ce69354e","./Check-5e798bbf","./GeometryAttribute-3314089a","./GeometryAttributes-b0b294d8","./IndexDatatype-da7c58eb","./Math-8386669c","./WallGeometryLibrary-c1be3e11","./RuntimeError-7f634f5d","./WebGLConstants-76bb35d1","./arrayRemoveDuplicates-3a9a9480","./PolylinePipeline-b25bdf3a","./EllipsoidGeodesic-92f0d3cc","./EllipsoidRhumbLine-73a4e3eb","./IntersectionTests-eb44dd99","./Plane-06d5a63d"],(function(e,i,t,a,n,r,o,s,l,d,m,u,p,f,h,c,g,y){"use strict";var b=new i.Cartesian3,_=new i.Cartesian3;function E(t){var a=(t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT)).positions,n=t.maximumHeights,r=t.minimumHeights,o=e.defaultValue(t.granularity,l.CesiumMath.RADIANS_PER_DEGREE);t=e.defaultValue(t.ellipsoid,i.Ellipsoid.WGS84),this._positions=a,this._minimumHeights=r,this._maximumHeights=n,this._granularity=o,this._ellipsoid=i.Ellipsoid.clone(t),this._workerName="createWallOutlineGeometry",a=1+a.length*i.Cartesian3.packedLength+2,e.defined(r)&&(a+=r.length),e.defined(n)&&(a+=n.length),this.packedLength=a+i.Ellipsoid.packedLength+1}E.pack=function(t,a,n){var r;n=e.defaultValue(n,0);var o=t._positions,s=o.length;for(a[n++]=s,r=0;r<s;++r,n+=i.Cartesian3.packedLength)i.Cartesian3.pack(o[r],a,n);var l=t._minimumHeights;if(s=e.defined(l)?l.length:0,a[n++]=s,e.defined(l))for(r=0;r<s;++r)a[n++]=l[r];var d=t._maximumHeights;if(s=e.defined(d)?d.length:0,a[n++]=s,e.defined(d))for(r=0;r<s;++r)a[n++]=d[r];return i.Ellipsoid.pack(t._ellipsoid,a,n),a[n+=i.Ellipsoid.packedLength]=t._granularity,a};var v=i.Ellipsoid.clone(i.Ellipsoid.UNIT_SPHERE),C={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:v,granularity:void 0};return E.unpack=function(t,a,n){a=e.defaultValue(a,0);for(var r,o,s=t[a++],l=new Array(s),d=0;d<s;++d,a+=i.Cartesian3.packedLength)l[d]=i.Cartesian3.unpack(t,a);if(0<(s=t[a++]))for(r=new Array(s),d=0;d<s;++d)r[d]=t[a++];if(0<(s=t[a++]))for(o=new Array(s),d=0;d<s;++d)o[d]=t[a++];var m=i.Ellipsoid.unpack(t,a,v),u=t[a+=i.Ellipsoid.packedLength];return e.defined(n)?(n._positions=l,n._minimumHeights=r,n._maximumHeights=o,n._ellipsoid=i.Ellipsoid.clone(m,n._ellipsoid),n._granularity=u,n):(C.positions=l,C.minimumHeights=r,C.maximumHeights=o,C.granularity=u,new E(C))},E.fromConstantHeights=function(i){var t=(i=e.defaultValue(i,e.defaultValue.EMPTY_OBJECT)).positions,a=i.minimumHeight,n=i.maximumHeight,r=e.defined(a),o=e.defined(n);if(r||o)for(var s=t.length,l=r?new Array(s):void 0,d=o?new Array(s):void 0,m=0;m<s;++m)r&&(l[m]=a),o&&(d[m]=n);return new E({positions:t,maximumHeights:d,minimumHeights:l,ellipsoid:i.ellipsoid})},E.createGeometry=function(n){var m=n._positions,u=n._minimumHeights,p=n._maximumHeights,f=n._granularity;if(n=n._ellipsoid,u=d.WallGeometryLibrary.computePositions(n,m,p,u,f,!1),e.defined(u)){var h=u.bottomPositions,c=u.topPositions,g=c.length,y=(f=2*g,new Float64Array(f)),E=0;for(g/=3,w=0;w<g;++w){var v=3*w,C=i.Cartesian3.fromArray(c,v,b);v=i.Cartesian3.fromArray(h,v,_),y[E++]=v.x,y[E++]=v.y,y[E++]=v.z,y[E++]=C.x,y[E++]=C.y,y[E++]=C.z}u=new o.GeometryAttributes({position:new r.GeometryAttribute({componentDatatype:a.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:y})});for(var H=f/3,A=s.IndexDatatype.createTypedArray(H,f=2*H-4+H),k=0,w=0;w<H-2;w+=2){var G=w,L=w+2,x=i.Cartesian3.fromArray(y,3*G,b),P=i.Cartesian3.fromArray(y,3*L,_);i.Cartesian3.equalsEpsilon(x,P,l.CesiumMath.EPSILON10)||(x=w+3,A[k++]=P=w+1,A[k++]=G,A[k++]=P,A[k++]=x,A[k++]=G,A[k++]=L)}return A[k++]=H-2,A[k++]=H-1,new r.Geometry({attributes:u,indices:A,primitiveType:r.PrimitiveType.LINES,boundingSphere:new t.BoundingSphere.fromVertices(y)})}},function(t,a){return(t=e.defined(a)?E.unpack(t,a):t)._ellipsoid=i.Ellipsoid.clone(t._ellipsoid),E.createGeometry(t)}}));