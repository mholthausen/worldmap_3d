define(["./when-ad3237a0","./Cartesian2-08065eec","./Transforms-1142ce48","./ComponentDatatype-a867ddaa","./Check-be2d5acb","./GeometryAttribute-da891979","./GeometryAttributes-27dc652d","./IndexDatatype-9504f550","./Math-5ca9b250","./WallGeometryLibrary-f1723c04","./combine-1510933d","./RuntimeError-767bd866","./WebGLConstants-1c8239cc","./arrayRemoveDuplicates-707c233c","./PolylinePipeline-05927ee2","./EllipsoidGeodesic-dc284f08","./EllipsoidRhumbLine-4a6ed5de","./IntersectionTests-75083888","./Plane-bb88dd7e"],(function(e,i,t,a,n,r,o,s,l,d,m,u,p,c,f,h,g,y,_){"use strict";var E=new i.Cartesian3,v=new i.Cartesian3;function C(t){var a=(t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT)).positions,n=t.maximumHeights,r=t.minimumHeights,o=e.defaultValue(t.granularity,l.CesiumMath.RADIANS_PER_DEGREE);t=e.defaultValue(t.ellipsoid,i.Ellipsoid.WGS84),this._positions=a,this._minimumHeights=r,this._maximumHeights=n,this._granularity=o,this._ellipsoid=i.Ellipsoid.clone(t),this._workerName="createWallOutlineGeometry",a=1+a.length*i.Cartesian3.packedLength+2,e.defined(r)&&(a+=r.length),e.defined(n)&&(a+=n.length),this.packedLength=a+i.Ellipsoid.packedLength+1}C.pack=function(t,a,n){var r;n=e.defaultValue(n,0);var o=t._positions,s=o.length;for(a[n++]=s,r=0;r<s;++r,n+=i.Cartesian3.packedLength)i.Cartesian3.pack(o[r],a,n);var l=t._minimumHeights;if(s=e.defined(l)?l.length:0,a[n++]=s,e.defined(l))for(r=0;r<s;++r)a[n++]=l[r];var d=t._maximumHeights;if(s=e.defined(d)?d.length:0,a[n++]=s,e.defined(d))for(r=0;r<s;++r)a[n++]=d[r];return i.Ellipsoid.pack(t._ellipsoid,a,n),a[n+=i.Ellipsoid.packedLength]=t._granularity,a};var H=i.Ellipsoid.clone(i.Ellipsoid.UNIT_SPHERE),b={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:H,granularity:void 0};return C.unpack=function(t,a,n){a=e.defaultValue(a,0);for(var r,o,s=t[a++],l=new Array(s),d=0;d<s;++d,a+=i.Cartesian3.packedLength)l[d]=i.Cartesian3.unpack(t,a);if(0<(s=t[a++]))for(r=new Array(s),d=0;d<s;++d)r[d]=t[a++];if(0<(s=t[a++]))for(o=new Array(s),d=0;d<s;++d)o[d]=t[a++];var m=i.Ellipsoid.unpack(t,a,H),u=t[a+=i.Ellipsoid.packedLength];return e.defined(n)?(n._positions=l,n._minimumHeights=r,n._maximumHeights=o,n._ellipsoid=i.Ellipsoid.clone(m,n._ellipsoid),n._granularity=u,n):(b.positions=l,b.minimumHeights=r,b.maximumHeights=o,b.granularity=u,new C(b))},C.fromConstantHeights=function(i){var t=(i=e.defaultValue(i,e.defaultValue.EMPTY_OBJECT)).positions,a=i.minimumHeight,n=i.maximumHeight,r=e.defined(a),o=e.defined(n);if(r||o)for(var s=t.length,l=r?new Array(s):void 0,d=o?new Array(s):void 0,m=0;m<s;++m)r&&(l[m]=a),o&&(d[m]=n);return new C({positions:t,maximumHeights:d,minimumHeights:l,ellipsoid:i.ellipsoid})},C.createGeometry=function(n){var m=n._positions,u=n._minimumHeights,p=n._maximumHeights,c=n._granularity;if(n=n._ellipsoid,u=d.WallGeometryLibrary.computePositions(n,m,p,u,c,!1),e.defined(u)){var f=u.bottomPositions,h=u.topPositions,g=h.length,y=(c=2*g,new Float64Array(c)),_=0;for(g/=3,w=0;w<g;++w){var C=3*w,H=i.Cartesian3.fromArray(h,C,E);C=i.Cartesian3.fromArray(f,C,v),y[_++]=C.x,y[_++]=C.y,y[_++]=C.z,y[_++]=H.x,y[_++]=H.y,y[_++]=H.z}u=new o.GeometryAttributes({position:new r.GeometryAttribute({componentDatatype:a.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:y})});for(var b=c/3,A=s.IndexDatatype.createTypedArray(b,c=2*b-4+b),k=0,w=0;w<b-2;w+=2){var G=w,L=w+2,x=i.Cartesian3.fromArray(y,3*G,E),P=i.Cartesian3.fromArray(y,3*L,v);i.Cartesian3.equalsEpsilon(x,P,l.CesiumMath.EPSILON10)||(x=w+3,A[k++]=P=w+1,A[k++]=G,A[k++]=P,A[k++]=x,A[k++]=G,A[k++]=L)}return A[k++]=b-2,A[k++]=b-1,new r.Geometry({attributes:u,indices:A,primitiveType:r.PrimitiveType.LINES,boundingSphere:new t.BoundingSphere.fromVertices(y)})}},function(t,a){return(t=e.defined(a)?C.unpack(t,a):t)._ellipsoid=i.Ellipsoid.clone(t._ellipsoid),C.createGeometry(t)}}));