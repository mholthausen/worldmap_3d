/*! For license information please see transcodeKTX2.js.LICENSE.txt */
import{a as r_}from"./chunk-2SKW2VRQ.js";import{a as K}from"./chunk-RN5GA5QZ.js";import{a as oe}from"./chunk-TWC6ISJU.js";import{a as n_}from"./chunk-RKPKWH3Z.js";import{b as __}from"./chunk-BIYNNQRQ.js";import{a as Gt,c as or,d as sr,e as ge}from"./chunk-ZLUSVROX.js";var s_=or(((e,t)=>{var r,n=(r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(r=r||__filename),function(e){var t,n,_=typeof(e=e||{})<"u"?e:{};_.ready=new Promise((function(e,r){t=e,n=r}));var o,i={};for(o in _)_.hasOwnProperty(o)&&(i[o]=_[o]);var a,s,u,R,A=[];u="object"==typeof window,R="function"==typeof importScripts,a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,s=!u&&!a&&!R;var c,T,f,l,O,p="";a?(p=R?Gt("path").dirname(p)+"/":__dirname+"/",c=function(e,t){return l||(l=Gt("fs")),O||(O=Gt("path")),e=O.normalize(e),l.readFileSync(e,t?null:"utf8")},f=function(e){var t=c(e,!0);return t.buffer||(t=new Uint8Array(t)),d(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),A=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof yt))throw e})),process.on("unhandledRejection",J),_.inspect=function(){return"[Emscripten Module object]"}):s?(typeof read<"u"&&(c=function(e){return read(e)}),f=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(d("object"==typeof(t=read(e,"binary"))),t)},typeof scriptArgs<"u"?A=scriptArgs:typeof arguments<"u"&&(A=arguments),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(u||R)&&(R?p=self.location.href:typeof document<"u"&&document.currentScript&&(p=document.currentScript.src),r&&(p=r),p=0!==p.indexOf("blob:")?p.substr(0,p.lastIndexOf("/")+1):"",c=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},R&&(f=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),T=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var C,B=_.print||console.log.bind(console),K=_.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(_[o]=i[o]);i=null,_.arguments&&(A=_.arguments),_.thisProgram&&_.thisProgram,_.quit&&_.quit,_.wasmBinary&&(C=_.wasmBinary),_.noExitRuntime,"object"!=typeof WebAssembly&&J("no native wasm support detected");var h,M=!1;function d(e,t){e||J("Assertion failed: "+t)}var F=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function G(e,t,r){for(var n=t+r,_=t;e[_]&&!(_>=n);)++_;if(_-t>16&&e.subarray&&F)return F.decode(e.subarray(t,_));for(var o="";t<_;){var i=e[t++];if(128&i){var a=63&e[t++];if(192!=(224&i)){var s=63&e[t++];if((i=224==(240&i)?(15&i)<<12|a<<6|s:(7&i)<<18|a<<12|s<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var u=i-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&i)<<6|a)}else o+=String.fromCharCode(i)}return o}function y(e,t){return e?G(v,e,t):""}var N,P,v,S,V,m,E,U,g,L=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function w(e,t){for(var r=e,n=r>>1,_=n+t/2;!(n>=_)&&V[n];)++n;if((r=n<<1)-e>32&&L)return L.decode(v.subarray(e,r));for(var o="",i=0;!(i>=t/2);++i){var a=S[e+2*i>>1];if(0==a)break;o+=String.fromCharCode(a)}return o}function b(e,t,r){if(void 0===r&&(r=2147483647),r<2)return 0;for(var n=t,_=(r-=2)<2*e.length?r/2:e.length,o=0;o<_;++o){var i=e.charCodeAt(o);S[t>>1]=i,t+=2}return S[t>>1]=0,t-n}function D(e){return 2*e.length}function I(e,t){for(var r=0,n="";!(r>=t/4);){var _=m[e+4*r>>2];if(0==_)break;if(++r,_>=65536){var o=_-65536;n+=String.fromCharCode(55296|o>>10,56320|1023&o)}else n+=String.fromCharCode(_)}return n}function X(e,t,r){if(void 0===r&&(r=2147483647),r<4)return 0;for(var n=t,_=n+r-4,o=0;o<e.length;++o){var i=e.charCodeAt(o);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),m[t>>2]=i,(t+=4)+4>_)break}return m[t>>2]=0,t-n}function x(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t}function $(e,t){return e%t>0&&(e+=t-e%t),e}function H(e){N=e,_.HEAP8=P=new Int8Array(e),_.HEAP16=S=new Int16Array(e),_.HEAP32=m=new Int32Array(e),_.HEAPU8=v=new Uint8Array(e),_.HEAPU16=V=new Uint16Array(e),_.HEAPU32=E=new Uint32Array(e),_.HEAPF32=U=new Float32Array(e),_.HEAPF64=g=new Float64Array(e)}_.INITIAL_MEMORY;var k,W=[],j=[],z=[],Y=[],q=0,Z=null,Q=null;function J(e){_.onAbort&&_.onAbort(e),K(e+=""),M=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function ee(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}_.preloadedImages={},_.preloadedAudios={};function te(e){return ee(e,"data:application/octet-stream;base64,")}function re(e){return ee(e,"file://")}var ne,_e="basis_transcoder.wasm";function oe(e){try{if(e==_e&&C)return new Uint8Array(C);if(f)return f(e);throw"both async and sync fetching of the wasm failed"}catch(e){J(e)}}function ie(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?k.get(r)():k.get(r)(t.arg):r(void 0===t.arg?null:t.arg)}else t(_)}}te(_e)||(ne=_e,_e=_.locateFile?_.locateFile(ne,p):p+ne);var ae={};function se(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function ue(e){return this.fromWireType(E[e>>2])}var Re={},Ae={},ce={},Te=48,fe=57;function le(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=Te&&t<=fe?"_"+e:e}function Oe(e,t){return e=le(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function pe(e,t){var r=Oe(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var Ce=void 0;function Be(e){throw new Ce(e)}function Ke(e,t,r){function n(t){var n=r(t);n.length!==e.length&&Be("Mismatched type converter count");for(var _=0;_<e.length;++_)ye(e[_],n[_])}e.forEach((function(e){ce[e]=t}));var _=new Array(t.length),o=[],i=0;t.forEach((function(e,t){Ae.hasOwnProperty(e)?_[t]=Ae[e]:(o.push(e),Re.hasOwnProperty(e)||(Re[e]=[]),Re[e].push((function(){_[t]=Ae[e],++i===o.length&&n(_)})))})),0===o.length&&n(_)}function he(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var Me=void 0;function de(e){for(var t="",r=e;v[r];)t+=Me[v[r++]];return t}var Fe=void 0;function Ge(e){throw new Fe(e)}function ye(e,t,r){if(r=r||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||Ge('type "'+n+'" must have a positive integer typeid pointer'),Ae.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;Ge("Cannot register type '"+n+"' twice")}if(Ae[e]=t,delete ce[e],Re.hasOwnProperty(e)){var _=Re[e];delete Re[e],_.forEach((function(e){e()}))}}function Ne(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function Pe(e){Ge(e.$$.ptrType.registeredClass.name+" instance already deleted")}var ve=!1;function Se(e){}function Ve(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function me(e){return typeof FinalizationGroup>"u"?(me=function(e){return e},e):(ve=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var r=t.value;r.ptr?Ve(r):console.warn("object already deleted: "+r.ptr)}})),Se=function(e){ve.unregister(e.$$)},(me=function(e){return ve.register(e,e.$$,e.$$),e})(e))}var Ee=void 0,Ue=[];function ge(){for(;Ue.length;){var e=Ue.pop();e.$$.deleteScheduled=!1,e.delete()}}function Le(){}var we={};function be(e,t,r){if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||Ge("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function De(e,t,r){_.hasOwnProperty(e)?((void 0===r||void 0!==_[e].overloadTable&&void 0!==_[e].overloadTable[r])&&Ge("Cannot register public name '"+e+"' twice"),be(_,e,e),_.hasOwnProperty(r)&&Ge("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),_[e].overloadTable[r]=t):(_[e]=t,void 0!==r&&(_[e].numArguments=r))}function Ie(e,t,r,n,_,o,i,a){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=_,this.getActualType=o,this.upcast=i,this.downcast=a,this.pureVirtualFunctions=[]}function Xe(e,t,r){for(;t!==r;)t.upcast||Ge("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function xe(e,t){if(null===t)return this.isReference&&Ge("null is not a valid "+this.name),0;t.$$||Ge('Cannot pass "'+ut(t)+'" as a '+this.name),t.$$.ptr||Ge("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass;return Xe(t.$$.ptr,r,this.registeredClass)}function $e(e,t){var r;if(null===t)return this.isReference&&Ge("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||Ge('Cannot pass "'+ut(t)+'" as a '+this.name),t.$$.ptr||Ge("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&Ge("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;if(r=Xe(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&Ge("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:Ge("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var _=t.clone();r=this.rawShare(r,it((function(){_.delete()}))),null!==e&&e.push(this.rawDestructor,r)}break;default:Ge("Unsupporting sharing policy")}return r}function He(e,t){if(null===t)return this.isReference&&Ge("null is not a valid "+this.name),0;t.$$||Ge('Cannot pass "'+ut(t)+'" as a '+this.name),t.$$.ptr||Ge("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&Ge("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;return Xe(t.$$.ptr,r,this.registeredClass)}function ke(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;var n=ke(e,t,r.baseClass);return null===n?null:r.downcast(n)}var We={};function je(e,t){return(!t.ptrType||!t.ptr)&&Be("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&Be("Both smartPtrType and smartPtr must be specified"),t.count={value:1},me(Object.create(e,{$$:{value:t}}))}function ze(e,t,r,n,_,o,i,a,s,u,R){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=_,this.pointeeType=o,this.sharingPolicy=i,this.rawGetPointee=a,this.rawConstructor=s,this.rawShare=u,this.rawDestructor=R,_||void 0!==t.baseClass?this.toWireType=$e:n?(this.toWireType=xe,this.destructorFunction=null):(this.toWireType=He,this.destructorFunction=null)}function Ye(e,t,r){_.hasOwnProperty(e)||Be("Replacing nonexistant public symbol"),void 0!==_[e].overloadTable&&void 0!==r?_[e].overloadTable[r]=t:(_[e]=t,_[e].argCount=r)}function qe(e,t){var r=-1!=(e=de(e)).indexOf("j")?function(e,t){var r=[];return function(){r.length=arguments.length;for(var n=0;n<arguments.length;n++)r[n]=arguments[n];return function(e,t,r){return-1!=e.indexOf("j")?function(e,t,r){var n=_["dynCall_"+e];return r&&r.length?n.apply(null,[t].concat(r)):n.call(null,t)}(e,t,r):k.get(t).apply(null,r)}(e,t,r)}}(e,t):k.get(t);return"function"!=typeof r&&Ge("unknown function pointer with signature "+e+": "+t),r}var Ze=void 0;function Qe(e){var t=Ft(e),r=de(t);return dt(t),r}function Je(e,t){var r=[],n={};throw t.forEach((function e(t){if(!n[t]&&!Ae[t]){if(ce[t])return void ce[t].forEach(e);r.push(t),n[t]=!0}})),new Ze(e+": "+r.map(Qe).join([", "]))}function et(e,t){for(var r=[],n=0;n<e;n++)r.push(m[(t>>2)+n]);return r}function tt(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=Oe(e.name||"unknownFunctionName",(function(){}));r.prototype=e.prototype;var n=new r,_=e.apply(n,t);return _ instanceof Object?_:n}function rt(e,t,r,n,_){var o=t.length;o<2&&Ge("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var i=null!==t[1]&&null!==r,a=!1,s=1;s<t.length;++s)if(null!==t[s]&&void 0===t[s].destructorFunction){a=!0;break}var u="void"!==t[0].name,R="",A="";for(s=0;s<o-2;++s)R+=(0!==s?", ":"")+"arg"+s,A+=(0!==s?", ":"")+"arg"+s+"Wired";var c="return function "+le(e)+"("+R+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";a&&(c+="var destructors = [];\n");var T=a?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],l=[Ge,n,_,se,t[0],t[1]];for(i&&(c+="var thisWired = classParam.toWireType("+T+", this);\n"),s=0;s<o-2;++s)c+="var arg"+s+"Wired = argType"+s+".toWireType("+T+", arg"+s+"); // "+t[s+2].name+"\n",f.push("argType"+s),l.push(t[s+2]);if(i&&(A="thisWired"+(A.length>0?", ":"")+A),c+=(u?"var rv = ":"")+"invoker(fn"+(A.length>0?", ":"")+A+");\n",a)c+="runDestructors(destructors);\n";else for(s=i?1:2;s<t.length;++s){var O=1===s?"thisWired":"arg"+(s-2)+"Wired";null!==t[s].destructorFunction&&(c+=O+"_dtor("+O+"); // "+t[s].name+"\n",f.push(O+"_dtor"),l.push(t[s].destructorFunction))}return u&&(c+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),c+="}\n",f.push(c),tt(Function,f).apply(null,l)}var nt=[],_t=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ot(e){e>4&&0==--_t[e].refcount&&(_t[e]=void 0,nt.push(e))}function it(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=nt.length?nt.pop():_t.length;return _t[t]={refcount:1,value:e},t}}function at(e,t,r){switch(t){case 0:return function(e){var t=r?P:v;return this.fromWireType(t[e])};case 1:return function(e){var t=r?S:V;return this.fromWireType(t[e>>1])};case 2:return function(e){var t=r?m:E;return this.fromWireType(t[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function st(e,t){var r=Ae[e];return void 0===r&&Ge(t+" has unknown type "+Qe(e)),r}function ut(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function Rt(e,t){switch(t){case 2:return function(e){return this.fromWireType(U[e>>2])};case 3:return function(e){return this.fromWireType(g[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function At(e,t,r){switch(t){case 0:return r?function(e){return P[e]}:function(e){return v[e]};case 1:return r?function(e){return S[e>>1]}:function(e){return V[e>>1]};case 2:return r?function(e){return m[e>>2]}:function(e){return E[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function ct(e){return e||Ge("Cannot use deleted val. handle = "+e),_t[e].value}var Tt={};function ft(e){var t=Tt[e];return void 0===t?de(e):t}var lt=[];function Ot(){return"object"==typeof globalThis?globalThis:Function("return this")()}var pt={};function Ct(e){try{return h.grow(e-N.byteLength+65535>>>16),H(h.buffer),1}catch{}}var Bt={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var r=Bt.buffers[e];0===t||10===t?((1===e?B:K)(G(r,0)),r.length=0):r.push(t)},varargs:void 0,get:function(){return Bt.varargs+=4,m[Bt.varargs-4>>2]},getStr:function(e){return y(e)},get64:function(e,t){return e}};Ce=_.InternalError=pe(Error,"InternalError"),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Me=e}(),Fe=_.BindingError=pe(Error,"BindingError"),Le.prototype.isAliasOf=function(e){if(!(this instanceof Le&&e instanceof Le))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,_=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)_=n.upcast(_),n=n.baseClass;return t===n&&r===_},Le.prototype.clone=function(){if(this.$$.ptr||Pe(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=me(Object.create(Object.getPrototypeOf(this),{$$:{value:Ne(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},Le.prototype.delete=function(){this.$$.ptr||Pe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Ge("Object already scheduled for deletion"),Se(this),Ve(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},Le.prototype.isDeleted=function(){return!this.$$.ptr},Le.prototype.deleteLater=function(){return this.$$.ptr||Pe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Ge("Object already scheduled for deletion"),Ue.push(this),1===Ue.length&&Ee&&Ee(ge),this.$$.deleteScheduled=!0,this},ze.prototype.getPointee=function(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},ze.prototype.destructor=function(e){this.rawDestructor&&this.rawDestructor(e)},ze.prototype.argPackAdvance=8,ze.prototype.readValueFromPointer=ue,ze.prototype.deleteObject=function(e){null!==e&&e.delete()},ze.prototype.fromWireType=function(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=function(e,t){return t=function(e,t){for(void 0===t&&Ge("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),We[t]}(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function _(){return this.isSmartPointer?je(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):je(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,i=this.registeredClass.getActualType(t),a=we[i];if(!a)return _.call(this);o=this.isConst?a.constPointerType:a.pointerType;var s=ke(t,this.registeredClass,o.registeredClass);return null===s?_.call(this):this.isSmartPointer?je(o.registeredClass.instancePrototype,{ptrType:o,ptr:s,smartPtrType:this,smartPtr:e}):je(o.registeredClass.instancePrototype,{ptrType:o,ptr:s})},_.getInheritedInstanceCount=function(){return Object.keys(We).length},_.getLiveInheritedInstances=function(){var e=[];for(var t in We)We.hasOwnProperty(t)&&e.push(We[t]);return e},_.flushPendingDeletes=ge,_.setDelayFunction=function(e){Ee=e,Ue.length&&Ee&&Ee(ge)},Ze=_.UnboundTypeError=pe(Error,"UnboundTypeError"),_.count_emval_handles=function(){for(var e=0,t=5;t<_t.length;++t)void 0!==_t[t]&&++e;return e},_.get_first_emval=function(){for(var e=5;e<_t.length;++e)if(void 0!==_t[e])return _t[e];return null};var Kt,ht={t:function(e){var t=ae[e];delete ae[e];var r=t.rawConstructor,n=t.rawDestructor,_=t.fields;Ke([e],_.map((function(e){return e.getterReturnType})).concat(_.map((function(e){return e.setterArgumentType}))),(function(e){var o={};return _.forEach((function(t,r){var n=t.fieldName,i=e[r],a=t.getter,s=t.getterContext,u=e[r+_.length],R=t.setter,A=t.setterContext;o[n]={read:function(e){return i.fromWireType(a(s,e))},write:function(e,t){var r=[];R(A,e,u.toWireType(r,t)),se(r)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var r in o)t[r]=o[r].read(e);return n(e),t},toWireType:function(e,t){for(var _ in o)if(!(_ in t))throw new TypeError('Missing field:  "'+_+'"');var i=r();for(_ in o)o[_].write(i,t[_]);return null!==e&&e.push(n,i),i},argPackAdvance:8,readValueFromPointer:ue,destructorFunction:n}]}))},I:function(e,t,r,n,_){var o=he(r);ye(e,{name:t=de(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:_},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===r)n=P;else if(2===r)n=S;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=m}return this.fromWireType(n[e>>o])},destructorFunction:null})},x:function(e,t,r,n,_,o,i,a,s,u,R,A,c){R=de(R),o=qe(_,o),a&&(a=qe(i,a)),u&&(u=qe(s,u)),c=qe(A,c);var T=le(R);De(T,(function(){Je("Cannot construct "+R+" due to unbound types",[n])})),Ke([e,t,r],n?[n]:[],(function(t){var r,_;t=t[0],_=n?(r=t.registeredClass).instancePrototype:Le.prototype;var i=Oe(T,(function(){if(Object.getPrototypeOf(this)!==s)throw new Fe("Use 'new' to construct "+R);if(void 0===A.constructor_body)throw new Fe(R+" has no accessible constructor");var e=A.constructor_body[arguments.length];if(void 0===e)throw new Fe("Tried to invoke ctor of "+R+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(A.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),s=Object.create(_,{constructor:{value:i}});i.prototype=s;var A=new Ie(R,i,s,c,r,o,a,u),f=new ze(R,A,!0,!1,!1),l=new ze(R+"*",A,!1,!1,!1),O=new ze(R+" const*",A,!1,!0,!1);return we[e]={pointerType:l,constPointerType:O},Ye(T,i),[f,l,O]}))},w:function(e,t,r,n,_,o){d(t>0);var i=et(t,r);_=qe(n,_);var a=[o],s=[];Ke([],[e],(function(e){var r="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new Fe("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){Je("Cannot construct "+e.name+" due to unbound types",i)},Ke([],i,(function(n){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&Ge(r+" called with "+arguments.length+" arguments, expected "+(t-1)),s.length=0,a.length=t;for(var e=1;e<t;++e)a[e]=n[e].toWireType(s,arguments[e-1]);var o=_.apply(null,a);return se(s),n[0].fromWireType(o)},[]})),[]}))},d:function(e,t,r,n,_,o,i,a){var s=et(r,n);t=de(t),o=qe(_,o),Ke([],[e],(function(e){var n=(e=e[0]).name+"."+t;function _(){Je("Cannot call "+n+" due to unbound types",s)}a&&e.registeredClass.pureVirtualFunctions.push(t);var u=e.registeredClass.instancePrototype,R=u[t];return void 0===R||void 0===R.overloadTable&&R.className!==e.name&&R.argCount===r-2?(_.argCount=r-2,_.className=e.name,u[t]=_):(be(u,t,n),u[t].overloadTable[r-2]=_),Ke([],s,(function(_){var a=rt(n,_,e,o,i);return void 0===u[t].overloadTable?(a.argCount=r-2,u[t]=a):u[t].overloadTable[r-2]=a,[]})),[]}))},k:function(e,t,r){e=de(e),Ke([],[t],(function(t){return t=t[0],_[e]=t.fromWireType(r),[]}))},H:function(e,t){ye(e,{name:t=de(t),fromWireType:function(e){var t=_t[e].value;return ot(e),t},toWireType:function(e,t){return it(t)},argPackAdvance:8,readValueFromPointer:ue,destructorFunction:null})},n:function(e,t,r,n){var _=he(r);function o(){}t=de(t),o.values={},ye(e,{name:t,constructor:o,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:at(t,_,n),destructorFunction:null}),De(t,o)},a:function(e,t,r){var n=st(e,"enum");t=de(t);var _=n.constructor,o=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:Oe(n.name+"_"+t,(function(){}))}});_.values[r]=o,_[t]=o},A:function(e,t,r){var n=he(r);ye(e,{name:t=de(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+ut(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:Rt(t,n),destructorFunction:null})},i:function(e,t,r,n,_,o){var i=et(t,r);e=de(e),_=qe(n,_),De(e,(function(){Je("Cannot call "+e+" due to unbound types",i)}),t-1),Ke([],i,(function(r){var n=[r[0],null].concat(r.slice(1));return Ye(e,rt(e,n,null,_,o),t-1),[]}))},j:function(e,t,r,n,_){t=de(t),-1===_&&(_=4294967295);var o=he(r),i=function(e){return e};if(0===n){var a=32-8*r;i=function(e){return e<<a>>>a}}var s=-1!=t.indexOf("unsigned");ye(e,{name:t,fromWireType:i,toWireType:function(e,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+ut(r)+'" to '+this.name);if(r<n||r>_)throw new TypeError('Passing a number "'+ut(r)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+n+", "+_+"]!");return s?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:At(t,o,0!==n),destructorFunction:null})},h:function(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function _(e){var t=E,r=t[e>>=2],_=t[e+1];return new n(N,_,r)}ye(e,{name:r=de(r),fromWireType:_,argPackAdvance:8,readValueFromPointer:_},{ignoreDuplicateRegistrations:!0})},B:function(e,t){var r="std::string"===(t=de(t));ye(e,{name:t,fromWireType:function(e){var t,n=E[e>>2];if(r)for(var _=e+4,o=0;o<=n;++o){var i=e+4+o;if(o==n||0==v[i]){var a=y(_,i-_);void 0===t?t=a:(t+="\0",t+=a),_=i+1}}else{var s=new Array(n);for(o=0;o<n;++o)s[o]=String.fromCharCode(v[e+4+o]);t=s.join("")}return dt(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n,_="string"==typeof t;_||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||Ge("Cannot pass non-string to std::string"),n=r&&_?function(){return function(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}(t)}:function(){return t.length};var o=n(),i=Mt(4+o+1);if(E[i>>2]=o,r&&_)!function(e,t,r){!function(e,t,r,n){if(!(n>0))return 0;for(var _=r+n-1,o=0;o<e.length;++o){var i=e.charCodeAt(o);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),i<=127){if(r>=_)break;t[r++]=i}else if(i<=2047){if(r+1>=_)break;t[r++]=192|i>>6,t[r++]=128|63&i}else if(i<=65535){if(r+2>=_)break;t[r++]=224|i>>12,t[r++]=128|i>>6&63,t[r++]=128|63&i}else{if(r+3>=_)break;t[r++]=240|i>>18,t[r++]=128|i>>12&63,t[r++]=128|i>>6&63,t[r++]=128|63&i}}t[r]=0}(e,v,t,r)}(t,i+4,o+1);else if(_)for(var a=0;a<o;++a){var s=t.charCodeAt(a);s>255&&(dt(i),Ge("String has UTF-16 code units that do not fit in 8 bits")),v[i+4+a]=s}else for(a=0;a<o;++a)v[i+4+a]=t[a];return null!==e&&e.push(dt,i),i},argPackAdvance:8,readValueFromPointer:ue,destructorFunction:function(e){dt(e)}})},v:function(e,t,r){var n,_,o,i,a;r=de(r),2===t?(n=w,_=b,i=D,o=function(){return V},a=1):4===t&&(n=I,_=X,i=x,o=function(){return E},a=2),ye(e,{name:r,fromWireType:function(e){for(var r,_=E[e>>2],i=o(),s=e+4,u=0;u<=_;++u){var R=e+4+u*t;if(u==_||0==i[R>>a]){var A=n(s,R-s);void 0===r?r=A:(r+="\0",r+=A),s=R+t}}return dt(e),r},toWireType:function(e,n){"string"!=typeof n&&Ge("Cannot pass non-string to C++ string type "+r);var o=i(n),s=Mt(4+o+t);return E[s>>2]=o>>a,_(n,s+4,o+t),null!==e&&e.push(dt,s),s},argPackAdvance:8,readValueFromPointer:ue,destructorFunction:function(e){dt(e)}})},u:function(e,t,r,n,_,o){ae[e]={name:de(t),rawConstructor:qe(r,n),rawDestructor:qe(_,o),fields:[]}},c:function(e,t,r,n,_,o,i,a,s,u){ae[e].fields.push({fieldName:de(t),getterReturnType:r,getter:qe(n,_),getterContext:o,setterArgumentType:i,setter:qe(a,s),setterContext:u})},J:function(e,t){ye(e,{isVoid:!0,name:t=de(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},m:function(e,t,r){e=ct(e),t=st(t,"emval::as");var n=[],_=it(n);return m[r>>2]=_,t.toWireType(n,e)},s:function(e,t,r,n){(e=lt[e])(t=ct(t),r=ft(r),null,n)},b:ot,y:function(e){return 0===e?it(Ot()):(e=ft(e),it(Ot()[e]))},p:function(e,t){for(var r=function(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=st(m[(t>>2)+n],"parameter "+n);return r}(e,t),n=r[0],_=n.name+"_$"+r.slice(1).map((function(e){return e.name})).join("_")+"$",o=["retType"],i=[n],a="",s=0;s<e-1;++s)a+=(0!==s?", ":"")+"arg"+s,o.push("argType"+s),i.push(r[1+s]);var u="return function "+le("methodCaller_"+_)+"(handle, name, destructors, args) {\n",R=0;for(s=0;s<e-1;++s)u+="    var arg"+s+" = argType"+s+".readValueFromPointer(args"+(R?"+"+R:"")+");\n",R+=r[s+1].argPackAdvance;for(u+="    var rv = handle[name]("+a+");\n",s=0;s<e-1;++s)r[s+1].deleteObject&&(u+="    argType"+s+".deleteObject(arg"+s+");\n");return n.isVoid||(u+="    return retType.toWireType(destructors, rv);\n"),u+="};\n",o.push(u),function(e){var t=lt.length;return lt.push(e),t}(tt(Function,o).apply(null,i))},r:function(e){return e=ft(e),it(_[e])},e:function(e,t){return it((e=ct(e))[t=ct(t)])},g:function(e){e>4&&(_t[e].refcount+=1)},q:function(e,t,r,n){e=ct(e);var o=pt[t];return o||(o=function(e){for(var t="",r=0;r<e;++r)t+=(0!==r?", ":"")+"arg"+r;var n="return function emval_allocator_"+e+"(constructor, argTypes, args) {\n";for(r=0;r<e;++r)n+="var argType"+r+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+r+'], "parameter '+r+'");\nvar arg'+r+" = argType"+r+".readValueFromPointer(args);\nargs += argType"+r+"['argPackAdvance'];\n";return n+="var obj = new constructor("+t+");\nreturn __emval_register(obj);\n}\n",new Function("requireRegisteredType","Module","__emval_register",n)(st,_,it)}(t),pt[t]=o),o(e,r,n)},f:function(e){return it(ft(e))},l:function(e){se(_t[e].value),ot(e)},o:function(){J()},E:function(e,t,r){v.copyWithin(e,t,t+r)},F:function(e){var t=v.length,r=2147483648;if((e>>>=0)>r)return!1;for(var n=1;n<=4;n*=2){var _=t*(1+.2/n);if(_=Math.min(_,e+100663296),Ct(Math.min(r,$(Math.max(e,_),65536))))return!0}return!1},G:function(e){return 0},C:function(e,t,r,n,_){},z:function(e,t,r,n){for(var _=0,o=0;o<r;o++){for(var i=m[t+8*o>>2],a=m[t+(8*o+4)>>2],s=0;s<a;s++)Bt.printChar(e,v[i+s]);_+=a}return m[n>>2]=_,0},D:function(e){}},Mt=(function(){var e={a:ht};function t(e,t){var r=e.exports;_.asm=r,H((h=_.asm.K).buffer),k=_.asm.O,function(e){j.unshift(e)}(_.asm.L),function(e){if(q--,_.monitorRunDependencies&&_.monitorRunDependencies(q),0==q&&(null!==Z&&(clearInterval(Z),Z=null),Q)){var t=Q;Q=null,t()}}()}function r(e){t(e.instance)}function o(t){return function(){if(!C&&(u||R)){if("function"==typeof fetch&&!re(_e))return fetch(_e,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+_e+"'";return e.arrayBuffer()})).catch((function(){return oe(_e)}));if(T)return new Promise((function(e,t){T(_e,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return oe(_e)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){K("failed to asynchronously prepare wasm: "+e),J(e)}))}if(q++,_.monitorRunDependencies&&_.monitorRunDependencies(q),_.instantiateWasm)try{return _.instantiateWasm(e,t)}catch(e){return K("Module.instantiateWasm callback failed with error: "+e),!1}(C||"function"!=typeof WebAssembly.instantiateStreaming||te(_e)||re(_e)||"function"!=typeof fetch?o(r):fetch(_e,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return K("wasm streaming compile failed: "+e),K("falling back to ArrayBuffer instantiation"),o(r)}))}))).catch(n)}(),_.___wasm_call_ctors=function(){return(_.___wasm_call_ctors=_.asm.L).apply(null,arguments)},_._malloc=function(){return(Mt=_._malloc=_.asm.M).apply(null,arguments)}),dt=_._free=function(){return(dt=_._free=_.asm.N).apply(null,arguments)},Ft=_.___getTypeName=function(){return(Ft=_.___getTypeName=_.asm.P).apply(null,arguments)};function yt(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Nt(e){function r(){Kt||(Kt=!0,_.calledRun=!0,!M&&(ie(j),ie(z),t(_),_.onRuntimeInitialized&&_.onRuntimeInitialized(),function(){if(_.postRun)for("function"==typeof _.postRun&&(_.postRun=[_.postRun]);_.postRun.length;)e=_.postRun.shift(),Y.unshift(e);var e;ie(Y)}()))}e=e||A,q>0||(function(){if(_.preRun)for("function"==typeof _.preRun&&(_.preRun=[_.preRun]);_.preRun.length;)e=_.preRun.shift(),W.unshift(e);var e;ie(W)}(),q>0)||(_.setStatus?(_.setStatus("Running..."),setTimeout((function(){setTimeout((function(){_.setStatus("")}),1),r()}),1)):r())}if(_.___embind_register_native_and_builtin_types=function(){return(_.___embind_register_native_and_builtin_types=_.asm.Q).apply(null,arguments)},_.dynCall_jiji=function(){return(_.dynCall_jiji=_.asm.R).apply(null,arguments)},Q=function e(){Kt||Nt(),Kt||(Q=e)},_.run=Nt,_.preInit)for("function"==typeof _.preInit&&(_.preInit=[_.preInit]);_.preInit.length>0;)_.preInit.pop()();return Nt(),e.ready});"object"==typeof e&&"object"==typeof t?t.exports=n:"function"==typeof define&&define.amd?define([],(function(){return n})):"object"==typeof e&&(e.BASIS=n)})),F={UNSIGNED_BYTE:K.UNSIGNED_BYTE,UNSIGNED_SHORT:K.UNSIGNED_SHORT,UNSIGNED_INT:K.UNSIGNED_INT,FLOAT:K.FLOAT,HALF_FLOAT:K.HALF_FLOAT_OES,UNSIGNED_INT_24_8:K.UNSIGNED_INT_24_8,UNSIGNED_SHORT_4_4_4_4:K.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:K.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT_5_6_5:K.UNSIGNED_SHORT_5_6_5,toWebGLConstant:function(e,t){switch(e){case F.UNSIGNED_BYTE:return K.UNSIGNED_BYTE;case F.UNSIGNED_SHORT:return K.UNSIGNED_SHORT;case F.UNSIGNED_INT:return K.UNSIGNED_INT;case F.FLOAT:return K.FLOAT;case F.HALF_FLOAT:return t.webgl2?K.HALF_FLOAT:K.HALF_FLOAT_OES;case F.UNSIGNED_INT_24_8:return K.UNSIGNED_INT_24_8;case F.UNSIGNED_SHORT_4_4_4_4:return K.UNSIGNED_SHORT_4_4_4_4;case F.UNSIGNED_SHORT_5_5_5_1:return K.UNSIGNED_SHORT_5_5_5_1;case F.UNSIGNED_SHORT_5_6_5:return F.UNSIGNED_SHORT_5_6_5}},isPacked:function(e){return e===F.UNSIGNED_INT_24_8||e===F.UNSIGNED_SHORT_4_4_4_4||e===F.UNSIGNED_SHORT_5_5_5_1||e===F.UNSIGNED_SHORT_5_6_5},sizeInBytes:function(e){switch(e){case F.UNSIGNED_BYTE:return 1;case F.UNSIGNED_SHORT:case F.UNSIGNED_SHORT_4_4_4_4:case F.UNSIGNED_SHORT_5_5_5_1:case F.UNSIGNED_SHORT_5_6_5:case F.HALF_FLOAT:return 2;case F.UNSIGNED_INT:case F.FLOAT:case F.UNSIGNED_INT_24_8:return 4}},validate:function(e){return e===F.UNSIGNED_BYTE||e===F.UNSIGNED_SHORT||e===F.UNSIGNED_INT||e===F.FLOAT||e===F.HALF_FLOAT||e===F.UNSIGNED_INT_24_8||e===F.UNSIGNED_SHORT_4_4_4_4||e===F.UNSIGNED_SHORT_5_5_5_1||e===F.UNSIGNED_SHORT_5_6_5}},b=Object.freeze(F),A={DEPTH_COMPONENT:K.DEPTH_COMPONENT,DEPTH_STENCIL:K.DEPTH_STENCIL,ALPHA:K.ALPHA,RED:K.RED,RG:K.RG,RGB:K.RGB,RGBA:K.RGBA,LUMINANCE:K.LUMINANCE,LUMINANCE_ALPHA:K.LUMINANCE_ALPHA,RGB_DXT1:K.COMPRESSED_RGB_S3TC_DXT1_EXT,RGBA_DXT1:K.COMPRESSED_RGBA_S3TC_DXT1_EXT,RGBA_DXT3:K.COMPRESSED_RGBA_S3TC_DXT3_EXT,RGBA_DXT5:K.COMPRESSED_RGBA_S3TC_DXT5_EXT,RGB_PVRTC_4BPPV1:K.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,RGB_PVRTC_2BPPV1:K.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,RGBA_PVRTC_4BPPV1:K.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,RGBA_PVRTC_2BPPV1:K.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,RGBA_ASTC:K.COMPRESSED_RGBA_ASTC_4x4_WEBGL,RGB_ETC1:K.COMPRESSED_RGB_ETC1_WEBGL,RGB8_ETC2:K.COMPRESSED_RGB8_ETC2,RGBA8_ETC2_EAC:K.COMPRESSED_RGBA8_ETC2_EAC,RGBA_BC7:K.COMPRESSED_RGBA_BPTC_UNORM,componentsLength:function(e){switch(e){case A.RGB:return 3;case A.RGBA:return 4;case A.LUMINANCE_ALPHA:case A.RG:return 2;case A.ALPHA:case A.RED:case A.LUMINANCE:default:return 1}},validate:function(e){return e===A.DEPTH_COMPONENT||e===A.DEPTH_STENCIL||e===A.ALPHA||e===A.RED||e===A.RG||e===A.RGB||e===A.RGBA||e===A.LUMINANCE||e===A.LUMINANCE_ALPHA||e===A.RGB_DXT1||e===A.RGBA_DXT1||e===A.RGBA_DXT3||e===A.RGBA_DXT5||e===A.RGB_PVRTC_4BPPV1||e===A.RGB_PVRTC_2BPPV1||e===A.RGBA_PVRTC_4BPPV1||e===A.RGBA_PVRTC_2BPPV1||e===A.RGBA_ASTC||e===A.RGB_ETC1||e===A.RGB8_ETC2||e===A.RGBA8_ETC2_EAC||e===A.RGBA_BC7},isColorFormat:function(e){return e===A.ALPHA||e===A.RGB||e===A.RGBA||e===A.LUMINANCE||e===A.LUMINANCE_ALPHA},isDepthFormat:function(e){return e===A.DEPTH_COMPONENT||e===A.DEPTH_STENCIL},isCompressedFormat:function(e){return e===A.RGB_DXT1||e===A.RGBA_DXT1||e===A.RGBA_DXT3||e===A.RGBA_DXT5||e===A.RGB_PVRTC_4BPPV1||e===A.RGB_PVRTC_2BPPV1||e===A.RGBA_PVRTC_4BPPV1||e===A.RGBA_PVRTC_2BPPV1||e===A.RGBA_ASTC||e===A.RGB_ETC1||e===A.RGB8_ETC2||e===A.RGBA8_ETC2_EAC||e===A.RGBA_BC7},isDXTFormat:function(e){return e===A.RGB_DXT1||e===A.RGBA_DXT1||e===A.RGBA_DXT3||e===A.RGBA_DXT5},isPVRTCFormat:function(e){return e===A.RGB_PVRTC_4BPPV1||e===A.RGB_PVRTC_2BPPV1||e===A.RGBA_PVRTC_4BPPV1||e===A.RGBA_PVRTC_2BPPV1},isASTCFormat:function(e){return e===A.RGBA_ASTC},isETC1Format:function(e){return e===A.RGB_ETC1},isETC2Format:function(e){return e===A.RGB8_ETC2||e===A.RGBA8_ETC2_EAC},isBC7Format:function(e){return e===A.RGBA_BC7},compressedTextureSizeInBytes:function(e,t,r){switch(e){case A.RGB_DXT1:case A.RGBA_DXT1:case A.RGB_ETC1:case A.RGB8_ETC2:return Math.floor((t+3)/4)*Math.floor((r+3)/4)*8;case A.RGBA_DXT3:case A.RGBA_DXT5:case A.RGBA_ASTC:case A.RGBA8_ETC2_EAC:return Math.floor((t+3)/4)*Math.floor((r+3)/4)*16;case A.RGB_PVRTC_4BPPV1:case A.RGBA_PVRTC_4BPPV1:return Math.floor((Math.max(t,8)*Math.max(r,8)*4+7)/8);case A.RGB_PVRTC_2BPPV1:case A.RGBA_PVRTC_2BPPV1:return Math.floor((Math.max(t,16)*Math.max(r,8)*2+7)/8);case A.RGBA_BC7:return Math.ceil(t/4)*Math.ceil(r/4)*16;default:return 0}},textureSizeInBytes:function(e,t,r,n){let _=A.componentsLength(e);return b.isPacked(t)&&(_=1),_*b.sizeInBytes(t)*r*n},alignmentInBytes:function(e,t,r){let n=A.textureSizeInBytes(e,t,r,1)%4;return 0===n?4:2===n?2:1},createTypedArray:function(e,t,r,n){let _,o=b.sizeInBytes(t);return _=o===Uint8Array.BYTES_PER_ELEMENT?Uint8Array:o===Uint16Array.BYTES_PER_ELEMENT?Uint16Array:o===Float32Array.BYTES_PER_ELEMENT&&t===b.FLOAT?Float32Array:Uint32Array,new _(A.componentsLength(e)*r*n)},flipY:function(e,t,r,n,_){if(1===_)return e;let o=A.createTypedArray(t,r,n,_),i=A.componentsLength(t),a=n*i;for(let t=0;t<_;++t){let r=t*n*i,s=(_-t-1)*n*i;for(let t=0;t<a;++t)o[s+t]=e[r+t]}return o},toInternalFormat:function(e,t,r){if(!r.webgl2)return e;if(e===A.DEPTH_STENCIL)return K.DEPTH24_STENCIL8;if(e===A.DEPTH_COMPONENT){if(t===b.UNSIGNED_SHORT)return K.DEPTH_COMPONENT16;if(t===b.UNSIGNED_INT)return K.DEPTH_COMPONENT24}if(t===b.FLOAT)switch(e){case A.RGBA:return K.RGBA32F;case A.RGB:return K.RGB32F;case A.RG:return K.RG32F;case A.RED:return K.R32F}if(t===b.HALF_FLOAT)switch(e){case A.RGBA:return K.RGBA16F;case A.RGB:return K.RGB16F;case A.RG:return K.RG16F;case A.RED:return K.R16F}return e}},E=Object.freeze(A),Rr={VK_FORMAT_UNDEFINED:0,VK_FORMAT_R4G4_UNORM_PACK8:1,VK_FORMAT_R4G4B4A4_UNORM_PACK16:2,VK_FORMAT_B4G4R4A4_UNORM_PACK16:3,VK_FORMAT_R5G6B5_UNORM_PACK16:4,VK_FORMAT_B5G6R5_UNORM_PACK16:5,VK_FORMAT_R5G5B5A1_UNORM_PACK16:6,VK_FORMAT_B5G5R5A1_UNORM_PACK16:7,VK_FORMAT_A1R5G5B5_UNORM_PACK16:8,VK_FORMAT_R8_UNORM:9,VK_FORMAT_R8_SNORM:10,VK_FORMAT_R8_USCALED:11,VK_FORMAT_R8_SSCALED:12,VK_FORMAT_R8_UINT:13,VK_FORMAT_R8_SINT:14,VK_FORMAT_R8_SRGB:15,VK_FORMAT_R8G8_UNORM:16,VK_FORMAT_R8G8_SNORM:17,VK_FORMAT_R8G8_USCALED:18,VK_FORMAT_R8G8_SSCALED:19,VK_FORMAT_R8G8_UINT:20,VK_FORMAT_R8G8_SINT:21,VK_FORMAT_R8G8_SRGB:22,VK_FORMAT_R8G8B8_UNORM:23,VK_FORMAT_R8G8B8_SNORM:24,VK_FORMAT_R8G8B8_USCALED:25,VK_FORMAT_R8G8B8_SSCALED:26,VK_FORMAT_R8G8B8_UINT:27,VK_FORMAT_R8G8B8_SINT:28,VK_FORMAT_R8G8B8_SRGB:29,VK_FORMAT_B8G8R8_UNORM:30,VK_FORMAT_B8G8R8_SNORM:31,VK_FORMAT_B8G8R8_USCALED:32,VK_FORMAT_B8G8R8_SSCALED:33,VK_FORMAT_B8G8R8_UINT:34,VK_FORMAT_B8G8R8_SINT:35,VK_FORMAT_B8G8R8_SRGB:36,VK_FORMAT_R8G8B8A8_UNORM:37,VK_FORMAT_R8G8B8A8_SNORM:38,VK_FORMAT_R8G8B8A8_USCALED:39,VK_FORMAT_R8G8B8A8_SSCALED:40,VK_FORMAT_R8G8B8A8_UINT:41,VK_FORMAT_R8G8B8A8_SINT:42,VK_FORMAT_R8G8B8A8_SRGB:43,VK_FORMAT_B8G8R8A8_UNORM:44,VK_FORMAT_B8G8R8A8_SNORM:45,VK_FORMAT_B8G8R8A8_USCALED:46,VK_FORMAT_B8G8R8A8_SSCALED:47,VK_FORMAT_B8G8R8A8_UINT:48,VK_FORMAT_B8G8R8A8_SINT:49,VK_FORMAT_B8G8R8A8_SRGB:50,VK_FORMAT_A8B8G8R8_UNORM_PACK32:51,VK_FORMAT_A8B8G8R8_SNORM_PACK32:52,VK_FORMAT_A8B8G8R8_USCALED_PACK32:53,VK_FORMAT_A8B8G8R8_SSCALED_PACK32:54,VK_FORMAT_A8B8G8R8_UINT_PACK32:55,VK_FORMAT_A8B8G8R8_SINT_PACK32:56,VK_FORMAT_A8B8G8R8_SRGB_PACK32:57,VK_FORMAT_A2R10G10B10_UNORM_PACK32:58,VK_FORMAT_A2R10G10B10_SNORM_PACK32:59,VK_FORMAT_A2R10G10B10_USCALED_PACK32:60,VK_FORMAT_A2R10G10B10_SSCALED_PACK32:61,VK_FORMAT_A2R10G10B10_UINT_PACK32:62,VK_FORMAT_A2R10G10B10_SINT_PACK32:63,VK_FORMAT_A2B10G10R10_UNORM_PACK32:64,VK_FORMAT_A2B10G10R10_SNORM_PACK32:65,VK_FORMAT_A2B10G10R10_USCALED_PACK32:66,VK_FORMAT_A2B10G10R10_SSCALED_PACK32:67,VK_FORMAT_A2B10G10R10_UINT_PACK32:68,VK_FORMAT_A2B10G10R10_SINT_PACK32:69,VK_FORMAT_R16_UNORM:70,VK_FORMAT_R16_SNORM:71,VK_FORMAT_R16_USCALED:72,VK_FORMAT_R16_SSCALED:73,VK_FORMAT_R16_UINT:74,VK_FORMAT_R16_SINT:75,VK_FORMAT_R16_SFLOAT:76,VK_FORMAT_R16G16_UNORM:77,VK_FORMAT_R16G16_SNORM:78,VK_FORMAT_R16G16_USCALED:79,VK_FORMAT_R16G16_SSCALED:80,VK_FORMAT_R16G16_UINT:81,VK_FORMAT_R16G16_SINT:82,VK_FORMAT_R16G16_SFLOAT:83,VK_FORMAT_R16G16B16_UNORM:84,VK_FORMAT_R16G16B16_SNORM:85,VK_FORMAT_R16G16B16_USCALED:86,VK_FORMAT_R16G16B16_SSCALED:87,VK_FORMAT_R16G16B16_UINT:88,VK_FORMAT_R16G16B16_SINT:89,VK_FORMAT_R16G16B16_SFLOAT:90,VK_FORMAT_R16G16B16A16_UNORM:91,VK_FORMAT_R16G16B16A16_SNORM:92,VK_FORMAT_R16G16B16A16_USCALED:93,VK_FORMAT_R16G16B16A16_SSCALED:94,VK_FORMAT_R16G16B16A16_UINT:95,VK_FORMAT_R16G16B16A16_SINT:96,VK_FORMAT_R16G16B16A16_SFLOAT:97,VK_FORMAT_R32_UINT:98,VK_FORMAT_R32_SINT:99,VK_FORMAT_R32_SFLOAT:100,VK_FORMAT_R32G32_UINT:101,VK_FORMAT_R32G32_SINT:102,VK_FORMAT_R32G32_SFLOAT:103,VK_FORMAT_R32G32B32_UINT:104,VK_FORMAT_R32G32B32_SINT:105,VK_FORMAT_R32G32B32_SFLOAT:106,VK_FORMAT_R32G32B32A32_UINT:107,VK_FORMAT_R32G32B32A32_SINT:108,VK_FORMAT_R32G32B32A32_SFLOAT:109,VK_FORMAT_R64_UINT:110,VK_FORMAT_R64_SINT:111,VK_FORMAT_R64_SFLOAT:112,VK_FORMAT_R64G64_UINT:113,VK_FORMAT_R64G64_SINT:114,VK_FORMAT_R64G64_SFLOAT:115,VK_FORMAT_R64G64B64_UINT:116,VK_FORMAT_R64G64B64_SINT:117,VK_FORMAT_R64G64B64_SFLOAT:118,VK_FORMAT_R64G64B64A64_UINT:119,VK_FORMAT_R64G64B64A64_SINT:120,VK_FORMAT_R64G64B64A64_SFLOAT:121,VK_FORMAT_B10G11R11_UFLOAT_PACK32:122,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:123,VK_FORMAT_D16_UNORM:124,VK_FORMAT_X8_D24_UNORM_PACK32:125,VK_FORMAT_D32_SFLOAT:126,VK_FORMAT_S8_UINT:127,VK_FORMAT_D16_UNORM_S8_UINT:128,VK_FORMAT_D24_UNORM_S8_UINT:129,VK_FORMAT_D32_SFLOAT_S8_UINT:130,VK_FORMAT_BC1_RGB_UNORM_BLOCK:131,VK_FORMAT_BC1_RGB_SRGB_BLOCK:132,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:133,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:134,VK_FORMAT_BC2_UNORM_BLOCK:135,VK_FORMAT_BC2_SRGB_BLOCK:136,VK_FORMAT_BC3_UNORM_BLOCK:137,VK_FORMAT_BC3_SRGB_BLOCK:138,VK_FORMAT_BC4_UNORM_BLOCK:139,VK_FORMAT_BC4_SNORM_BLOCK:140,VK_FORMAT_BC5_UNORM_BLOCK:141,VK_FORMAT_BC5_SNORM_BLOCK:142,VK_FORMAT_BC6H_UFLOAT_BLOCK:143,VK_FORMAT_BC6H_SFLOAT_BLOCK:144,VK_FORMAT_BC7_UNORM_BLOCK:145,VK_FORMAT_BC7_SRGB_BLOCK:146,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:147,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:148,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:149,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:150,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:151,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:152,VK_FORMAT_EAC_R11_UNORM_BLOCK:153,VK_FORMAT_EAC_R11_SNORM_BLOCK:154,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:155,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:156,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:157,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:158,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:159,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:160,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:161,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:162,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:163,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:164,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:165,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:166,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:167,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:168,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:169,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:170,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:171,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:172,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:173,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:174,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:175,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:176,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:177,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:178,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:179,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:180,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:181,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:182,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:183,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:184,VK_FORMAT_G8B8G8R8_422_UNORM:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM:1000156006,VK_FORMAT_R10X6_UNORM_PACK16:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16:1000156016,VK_FORMAT_R12X4_UNORM_PACK16:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM:1000156033,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:1000054e3,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:1000054001,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:1000054002,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:1000054003,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:1000054004,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:1000054005,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:1000054006,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:1000054007,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:1000066e3,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:1000066001,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:1000066002,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:1000066003,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:1000066004,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:1000066005,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:1000066006,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:1000066007,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:1000066008,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:1000066009,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:1000066010,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:1000066011,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:1000066012,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:1000066013,VK_FORMAT_G8B8G8R8_422_UNORM_KHR:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM_KHR:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM_KHR:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM_KHR:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM_KHR:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM_KHR:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM_KHR:1000156006,VK_FORMAT_R10X6_UNORM_PACK16_KHR:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16_KHR:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16_KHR:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16_KHR:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16_KHR:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16_KHR:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16_KHR:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16_KHR:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16_KHR:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16_KHR:1000156016,VK_FORMAT_R12X4_UNORM_PACK16_KHR:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16_KHR:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16_KHR:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16_KHR:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16_KHR:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16_KHR:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16_KHR:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16_KHR:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16_KHR:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16_KHR:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM_KHR:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM_KHR:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM_KHR:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM_KHR:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM_KHR:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM_KHR:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM_KHR:1000156033},Le=Object.freeze(Rr),Vt=class{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}},le=class{constructor(e,t,r,n){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,r),this._littleEndian=n,this._offset=0}_nextUint8(){let e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){let e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){let e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){let e=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){let e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){let t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t=0){let r=this._offset,n=0;for(;this._dataView.getUint8(this._offset)!==t&&n<e;)n++,this._offset++;return n<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,n)}},dr=new Uint8Array([0]),w=[171,75,84,88,32,50,48,187,13,10,26,10];function i_(e){return typeof TextDecoder<"u"?(new TextDecoder).decode(e):Buffer.from(e).toString("utf8")}function o_(e){let t=new Uint8Array(e.buffer,e.byteOffset,w.length);if(t[0]!==w[0]||t[1]!==w[1]||t[2]!==w[2]||t[3]!==w[3]||t[4]!==w[4]||t[5]!==w[5]||t[6]!==w[6]||t[7]!==w[7]||t[8]!==w[8]||t[9]!==w[9]||t[10]!==w[10]||t[11]!==w[11])throw new Error("Missing KTX 2.0 identifier.");let r=new Vt,n=17*Uint32Array.BYTES_PER_ELEMENT,_=new le(e,w.length,n,!0);r.vkFormat=_._nextUint32(),r.typeSize=_._nextUint32(),r.pixelWidth=_._nextUint32(),r.pixelHeight=_._nextUint32(),r.pixelDepth=_._nextUint32(),r.layerCount=_._nextUint32(),r.faceCount=_._nextUint32();let o=_._nextUint32();r.supercompressionScheme=_._nextUint32();let i=_._nextUint32(),a=_._nextUint32(),s=_._nextUint32(),u=_._nextUint32(),R=_._nextUint64(),A=_._nextUint64(),c=3*o*8,T=new le(e,w.length+n,c,!0);for(let t=0;t<o;t++)r.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+T._nextUint64(),T._nextUint64()),uncompressedByteLength:T._nextUint64()});let f=new le(e,i,a,!0),l={vendorId:f._skip(4)._nextUint16(),descriptorType:f._nextUint16(),versionNumber:f._nextUint16(),descriptorBlockSize:f._nextUint16(),colorModel:f._nextUint8(),colorPrimaries:f._nextUint8(),transferFunction:f._nextUint8(),flags:f._nextUint8(),texelBlockDimension:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],bytesPlane:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],samples:[]},O=(l.descriptorBlockSize/4-6)/4;for(let e=0;e<O;e++){let t={bitOffset:f._nextUint16(),bitLength:f._nextUint8(),channelType:f._nextUint8(),samplePosition:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&t.channelType?(t.sampleLower=f._nextInt32(),t.sampleUpper=f._nextInt32()):(t.sampleLower=f._nextUint32(),t.sampleUpper=f._nextUint32()),l.samples[e]=t}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(l);let p=new le(e,s,u,!0);for(;p._offset<u;){let e=p._nextUint32(),t=p._scan(e),n=i_(t);if(r.keyValue[n]=p._nextUint8Array(e-t.byteLength-1),n.match(/^ktx/i)){let e=i_(r.keyValue[n]);r.keyValue[n]=e.substring(0,e.lastIndexOf("\0"))}let _=e%4?4-e%4:0;p._skip(_)}if(A<=0)return r;let C=new le(e,R,A,!0),B=C._nextUint16(),K=C._nextUint16(),h=C._nextUint32(),M=C._nextUint32(),d=C._nextUint32(),F=C._nextUint32(),G=[];for(let e=0;e<o;e++)G.push({imageFlags:C._nextUint32(),rgbSliceByteOffset:C._nextUint32(),rgbSliceByteLength:C._nextUint32(),alphaSliceByteOffset:C._nextUint32(),alphaSliceByteLength:C._nextUint32()});let y=R+C._offset,N=y+h,P=N+M,v=P+d,S=new Uint8Array(e.buffer,e.byteOffset+y,h),V=new Uint8Array(e.buffer,e.byteOffset+N,M),m=new Uint8Array(e.buffer,e.byteOffset+P,d),E=new Uint8Array(e.buffer,e.byteOffset+v,F);return r.globalData={endpointCount:B,selectorCount:K,imageDescs:G,endpointsData:S,selectorsData:V,tablesData:m,extendedData:E},r}var me,R_=sr(s_(),1),a_=["positiveX","negativeX","positiveY","negativeY","positiveZ","negativeZ"],c_=163,A_=166;function ar(e,t){__.typeOf.object("transcoderModule",me);let r,n=e.ktx2Buffer,_=e.supportedTargetFormats;try{r=o_(n)}catch{throw new oe("Invalid KTX2 file.")}if(0!==r.layerCount)throw new oe("KTX2 texture arrays are not supported.");if(0!==r.pixelDepth)throw new oe("KTX2 3D textures are unsupported.");let o=r.dataFormatDescriptor[0],i=new Array(r.levelCount);return 0!==r.vkFormat||o.colorModel!==c_&&o.colorModel!==A_?(t.push(n.buffer),cr(r,i)):Ar(n,r,_,me,t,i),i}function cr(e,t){let r,n=e.vkFormat===Le.VK_FORMAT_R8G8B8_SRGB?E.RGB:E.RGBA;e.vkFormat===Le.VK_FORMAT_R8G8B8A8_UNORM?r=b.UNSIGNED_BYTE:e.vkFormat===Le.VK_FORMAT_R16G16B16A16_SFLOAT?r=b.HALF_FLOAT:e.vkFormat===Le.VK_FORMAT_R32G32B32A32_SFLOAT&&(r=b.FLOAT);for(let _=0;_<e.levels.length;++_){let o={};t[_]=o;let i=e.levels[_].levelData,a=e.pixelWidth>>_,s=e.pixelHeight>>_,u=a*s*E.componentsLength(n);for(let t=0;t<e.faceCount;++t){let _,R=i.byteOffset+u*e.typeSize*t;_=ge(r)&&1!==b.sizeInBytes(r)?2===b.sizeInBytes(r)?new Uint16Array(i.buffer,R,u):new Float32Array(i.buffer,R,u):new Uint8Array(i.buffer,R,u),o[a_[t]]={internalFormat:n,datatype:r,width:a,height:s,levelBuffer:_}}}}function Ar(e,t,r,n,_,o){let i=new n.KTX2File(e),a=i.getWidth(),s=i.getHeight(),u=i.getLevels(),R=i.getHasAlpha();if(!(a>0&&s>0&&u>0))throw i.close(),i.delete(),new oe("Invalid KTX2 file");let A,c,T=t.dataFormatDescriptor[0],f=n.transcoder_texture_format;if(T.colorModel===c_)if(r.etc)A=R?E.RGBA8_ETC2_EAC:E.RGB8_ETC2,c=R?f.cTFETC2_RGBA:f.cTFETC1_RGB;else if(r.etc1&&!R)A=E.RGB_ETC1,c=f.cTFETC1_RGB;else if(r.s3tc)A=R?E.RGBA_DXT5:E.RGB_DXT1,c=R?f.cTFBC3_RGBA:f.cTFBC1_RGB;else if(r.pvrtc)A=R?E.RGBA_PVRTC_4BPPV1:E.RGB_PVRTC_4BPPV1,c=R?f.cTFPVRTC1_4_RGBA:f.cTFPVRTC1_4_RGB;else if(r.astc)A=E.RGBA_ASTC,c=f.cTFASTC_4x4_RGBA;else{if(!r.bc7)throw new oe("No transcoding format target available for ETC1S compressed ktx2.");A=E.RGBA_BC7,c=f.cTFBC7_RGBA}else if(T.colorModel===A_)if(r.astc)A=E.RGBA_ASTC,c=f.cTFASTC_4x4_RGBA;else if(r.bc7)A=E.RGBA_BC7,c=f.cTFBC7_RGBA;else if(r.s3tc)A=R?E.RGBA_DXT5:E.RGB_DXT1,c=R?f.cTFBC3_RGBA:f.cTFBC1_RGB;else if(r.etc)A=R?E.RGBA8_ETC2_EAC:E.RGB8_ETC2,c=R?f.cTFETC2_RGBA:f.cTFETC1_RGB;else if(r.etc1&&!R)A=E.RGB_ETC1,c=f.cTFETC1_RGB;else{if(!r.pvrtc)throw new oe("No transcoding format target available for UASTC compressed ktx2.");A=R?E.RGBA_PVRTC_4BPPV1:E.RGB_PVRTC_4BPPV1,c=R?f.cTFPVRTC1_4_RGBA:f.cTFPVRTC1_4_RGB}if(!i.startTranscoding())throw i.close(),i.delete(),new oe("startTranscoding() failed");for(let e=0;e<t.levels.length;++e){let r={};o[e]=r,a=t.pixelWidth>>e,s=t.pixelHeight>>e;let n=i.getImageTranscodedSizeInBytes(e,0,0,c.value),u=new Uint8Array(n),R=i.transcodeImage(u,e,0,0,c.value,0,-1,-1);if(!ge(R))throw new oe("transcodeImage() failed.");_.push(u.buffer),r[a_[0]]={internalFormat:A,width:a,height:s,levelBuffer:u}}return i.close(),i.delete(),o}async function fr(e,t){let r=e.webAssemblyConfig,n=n_(R_.default,self.BASIS);return(me=ge(r.wasmBinaryFile)?await n(r):await n()).initializeBasis(),!0}function Tr(e,t){let r=e.webAssemblyConfig;return ge(r)?fr(e,t):ar(e,t)}var yr=r_(Tr);export{yr as default};